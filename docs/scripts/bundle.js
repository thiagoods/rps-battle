'use strict';const GameOptions={gameModes:[{text:'Player vs Computer',numPlayers:1},{text:'Computer vs Computer',numPlayers:0}],weapons:[{name:'Rock',img:'./images/rock.svg',wins:'Scissors'},{name:'Paper',img:'./images/paper.svg',wins:'Rock'},{name:'Scissors',img:'./images/scissors.svg',wins:'Paper'}]};const UserInterface=function(){function a(){h.classList.add('fade'),setTimeout(()=>{for(;h.firstChild;)h.removeChild(h.firstChild)},i)}function b(a){setTimeout(()=>{h.appendChild(a),h.classList.remove('fade')},i)}function c(){a(),g();let c=document.createElement('button');c.innerText='Start Game',c.classList.add('menu-button'),c.addEventListener('click',()=>{d()});let e=document.createDocumentFragment();e.appendChild(c),b(e)}function d(){a(),g();let c=document.createDocumentFragment(),d=GameOptions.gameModes;d.map(function(a){let b=document.createElement('button');b.innerText=a.text,b.setAttribute('data-players',a.numPlayers),b.classList.add('menu-button'),b.addEventListener('click',function(){Game.startNewGame(this.getAttribute('data-players')),e(this.getAttribute('data-players'))}),c.appendChild(b)}),b(c)}function e(c){'number'!=typeof c&&(c=+c),f(),a();let d=document.createDocumentFragment(),e=document.createElement('h1');e.classList.add('call-to-action'),e.innerText='Choose your weapon!',d.appendChild(e);let g=document.createElement('div');g.classList.add('boxes-wrapper');for(let a,b=1;2>=b;b++)a=document.createElement('div'),a.classList.add(`box-${b}`),g.appendChild(a);d.appendChild(g);let h=GameOptions.weapons;h.map(function(a){let b=document.createElement('button');b.classList.add('weapon-button');let e=`weapon-${a.name.toLowerCase()}`;b.classList.add(e),b.setAttribute('data-weapon',a.name);let f=document.createElement('span');f.classList.add('weapon-button-label'),f.innerText=a.name,b.appendChild(f),0<c?b.addEventListener('click',function(){if(!this.getAttribute('disabled')){Game.playerChoice(this.getAttribute('data-weapon'));let a=document.querySelectorAll('.weapon-button'),b=Array.prototype.slice.apply(a);b.map(function(a){a.setAttribute('disabled',!0)})}}):b.setAttribute('disabled',!0),d.appendChild(b)}),b(d),0===c&&setTimeout(()=>{Game.computerChoice()},2*i)}function f(){let a=document.querySelector('.logo');a.style.opacity=0,setTimeout(()=>{a.style.display='none'},i)}function g(){let a=document.querySelector('.logo');setTimeout(()=>{a.style.display='block'},i),setTimeout(()=>{a.style.opacity=1},1.5*i)}const h=document.getElementById('app'),i=500;return{init:function(){c()},updateChoice:function(a,b){let c=document.querySelector(`.box-${a}`),d=document.createElement('img');d.src=b.img,d.classList.add('chosen-weapon');let e=document.createElement('span');e.classList.add('box-label'),e.innerText=b.name,c.appendChild(d),c.appendChild(e)},declareWinner:function(c,f,g,h){a();let i='p1'===c?1===f?'You win':0===f?'Computer 1 wins':'Player 1 wins':'p2'===c?1===f?'You lose':0===f?'Computer 2 wins':'Player 2 wins':'It\'s a draw';let j=document.createDocumentFragment();if(g){let a=document.createElement('h1');a.classList.add('call-to-action'),a.innerText=g,j.appendChild(a)}let k=document.createElement('h1');k.classList.add('call-to-action'),k.innerText=i;let l=document.createElement('div');l.classList.add('scorebox');for(let a=1;2>=a;a++){let b=`p${a}`,c=document.createElement('div');if(c.classList.add('score'),c.innerHTML=`${b.toUpperCase()}<br/>${h[b]}`,l.appendChild(c),1===a){let a=document.createElement('div');a.innerText='X',l.appendChild(a)}}let m=document.createElement('button');m.classList.add('menu-button'),m.innerText='Play Again',m.addEventListener('click',()=>{e(f)});let n=document.createElement('button');n.classList.add('menu-button'),n.innerText='Back to Start',n.addEventListener('click',()=>{d()}),j.appendChild(k),j.appendChild(l),j.appendChild(m),j.appendChild(n),b(j)},waitforOpponentCallToAction:function(){let a=document.querySelector('.call-to-action');a.innerText='Wait for your opponent'}}}();const Game=function(){function a(){let c=Math.floor(Math.random()*GameOptions.weapons.length),e=GameOptions.weapons[c];d.playersChoices.push(e);let f=d.playersChoices.length;if(UserInterface.updateChoice(f,e),2===d.playersChoices.length){let a=d.playersChoices.shift(),c=d.playersChoices.shift();setTimeout(()=>{b(a,c)},2e3)}else setTimeout(()=>{console.log('computer playing'),a()},1500)}function b(a,b){let e=d.numPlayers;if(a.name===b.name)UserInterface.declareWinner('draw',e,!1,d.score);else if(a.wins===b.name){c('p1');let f=`${a.name} beats ${b.name}`;UserInterface.declareWinner('p1',e,f,d.score)}else{c('p2');let f=`${b.name} beats ${a.name}`;UserInterface.declareWinner('p2',e,f,d.score)}}function c(a){d.score[a]++}let d={score:{p1:0,p2:0},numPlayers:0,playersChoices:[]};return{startNewGame:function(a){'number'!=typeof a&&(a=+a),d.score={p1:0,p2:0},d.numPlayers=a},computerChoice:a,playerChoice:function(b){let c,e=GameOptions.weapons;for(let a=0,d=e.length;a<d;a++)if(b===e[a].name){c=e[a];break}if(c!==void 0){d.playersChoices.push(c);let a=d.playersChoices.length;UserInterface.updateChoice(a,c)}else console.log('Weapon unavailable. Changing to random weapon');1===d.numPlayers&&(UserInterface.waitforOpponentCallToAction(),setTimeout(()=>{a()},1500))}}}();'use strict',UserInterface.init();