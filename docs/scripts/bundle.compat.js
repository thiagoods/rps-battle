'use strict';var GameOptions={gameModes:[{text:'Player vs Computer',numPlayers:1},{text:'Computer vs Computer',numPlayers:0}],weapons:[{name:'Rock',img:'./images/rock.svg',wins:'Scissors'},{name:'Paper',img:'./images/paper.svg',wins:'Rock'},{name:'Scissors',img:'./images/scissors.svg',wins:'Paper'}]},UserInterface=function(){function o(){e.classList.add('fade'),setTimeout(function(){for(;e.firstChild;)e.removeChild(e.firstChild)},k)}function a(b){setTimeout(function(){e.appendChild(b),e.classList.remove('fade')},k)}function b(){o(),f();var b=document.createElement('button');b.innerText='Start Game',b.classList.add('menu-button'),b.addEventListener('click',function(){c()});var d=document.createDocumentFragment();d.appendChild(b),a(d)}function c(){o(),f();var e=document.createDocumentFragment(),b=GameOptions.gameModes;b.map(function(c){var a=document.createElement('button');a.innerText=c.text,a.setAttribute('data-players',c.numPlayers),a.classList.add('menu-button'),a.addEventListener('click',function(){Game.startNewGame(this.getAttribute('data-players')),d(this.getAttribute('data-players'))}),e.appendChild(a)}),a(e)}function d(i){'number'!=typeof i&&(i=+i),j(),o();var l=document.createDocumentFragment(),b=document.createElement('h1');b.classList.add('call-to-action'),b.innerText='Choose your weapon!',l.appendChild(b);var d=document.createElement('div');d.classList.add('boxes-wrapper');for(var g,h=1;2>=h;h++)g=document.createElement('div'),g.classList.add('box-'+h),d.appendChild(g);l.appendChild(d);var f=GameOptions.weapons;f.map(function(c){var a=document.createElement('button');a.classList.add('weapon-button');var b='weapon-'+c.name.toLowerCase();a.classList.add(b),a.setAttribute('data-weapon',c.name);var d=document.createElement('span');d.classList.add('weapon-button-label'),d.innerText=c.name,a.appendChild(d),0<i?a.addEventListener('click',function(){if(!this.getAttribute('disabled')){Game.playerChoice(this.getAttribute('data-weapon'));var a=document.querySelectorAll('.weapon-button'),b=Array.prototype.slice.apply(a);b.map(function(b){b.setAttribute('disabled',!0)})}}):a.setAttribute('disabled',!0),l.appendChild(a)}),a(l),0===i&&setTimeout(function(){Game.computerChoice()},2*k)}function j(){var b=document.querySelector('.logo');b.style.opacity=0,setTimeout(function(){b.style.display='none'},k)}function f(){var b=document.querySelector('.logo');setTimeout(function(){b.style.display='block'},k),setTimeout(function(){b.style.opacity=1},1.5*k)}var e=document.getElementById('app'),k=500;return{init:function init(){b()},updateChoice:function updateChoice(f,a){var b=document.querySelector('.box-'+f),c=document.createElement('img');c.src=a.img,c.classList.add('chosen-weapon');var d=document.createElement('span');d.classList.add('box-label'),d.innerText=a.name,b.appendChild(c),b.appendChild(d)},declareWinner:function declareWinner(b,e,f,g){o();var h='p1'===b?1===e?'You win':0===e?'Computer 1 wins':'Player 1 wins':'p2'===b?1===e?'You lose':0===e?'Computer 2 wins':'Player 2 wins':'It\'s a draw',i=document.createDocumentFragment();if(f){var n=document.createElement('h1');n.classList.add('call-to-action'),n.innerText=f,i.appendChild(n)}var j=document.createElement('h1');j.classList.add('call-to-action'),j.innerText=h;var k=document.createElement('div');k.classList.add('scorebox');for(var p=1;2>=p;p++){var q='p'+p,r=document.createElement('div');if(r.classList.add('score'),r.innerHTML=q.toUpperCase()+'<br/>'+g[q],k.appendChild(r),1===p){var s=document.createElement('div');s.innerText='X',k.appendChild(s)}}var l=document.createElement('button');l.classList.add('menu-button'),l.innerText='Play Again',l.addEventListener('click',function(){d(e)});var m=document.createElement('button');m.classList.add('menu-button'),m.innerText='Back to Start',m.addEventListener('click',function(){c()}),i.appendChild(j),i.appendChild(k),i.appendChild(l),i.appendChild(m),a(i)},waitforOpponentCallToAction:function waitforOpponentCallToAction(){var b=document.querySelector('.call-to-action');b.innerText='Wait for your opponent'}}}(),Game=function(){function e(){var a=Math.floor(Math.random()*GameOptions.weapons.length),b=GameOptions.weapons[a];h.playersChoices.push(b);var c=h.playersChoices.length;if(UserInterface.updateChoice(c,b),2===h.playersChoices.length){var d=h.playersChoices.shift(),g=h.playersChoices.shift();setTimeout(function(){f(d,g)},2e3)}else setTimeout(function(){console.log('computer playing'),e()},1500)}function f(c,a){var d=h.numPlayers;if(c.name===a.name)UserInterface.declareWinner('draw',d,!1,h.score);else if(c.wins===a.name){g('p1');var e=c.name+' beats '+a.name;UserInterface.declareWinner('p1',d,e,h.score)}else{g('p2');var f=a.name+' beats '+c.name;UserInterface.declareWinner('p2',d,f,h.score)}}function g(b){h.score[b]++}var h={score:{p1:0,p2:0},numPlayers:0,playersChoices:[]};return{startNewGame:function startNewGame(b){'number'!=typeof b&&(b=+b),h.score={p1:0,p2:0},h.numPlayers=b},computerChoice:e,playerChoice:function playerChoice(a){for(var b=GameOptions.weapons,c=0,d=b.length;c<d;c++)if(a===b[c].name){b[c];break}if(void 0!==g){h.playersChoices.push(g);var e=h.playersChoices.length;UserInterface.updateChoice(e,g)}else console.log('Weapon unavailable. Changing to random weapon');1===h.numPlayers&&(UserInterface.waitforOpponentCallToAction(),setTimeout(function(){e()},1500))}}}();'use strict',UserInterface.init();